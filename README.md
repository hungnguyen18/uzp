# UZP - Secure Secrets Manager

A professional command-line tool for securely storing and managing sensitive information such as API keys, access tokens, and service credentials. All data is encrypted using AES-256-GCM and stored locally.

## Features

- ğŸ” **AES-256-GCM encryption** for maximum security
- ğŸ”‘ **Master password protection** with scrypt key derivation  
- ğŸ”„ **Auto-unlock** - no session management needed
- ğŸ“‹ **Clipboard integration** with automatic clearing
- ğŸ” **Search functionality** for quick access
- ğŸ“ **Project-based organization** of secrets
- ğŸ“„ **Environment file export** (.env generation)
- ğŸŒ **Cross-platform support** (macOS, Linux, Windows)
- âš¡ **Professional UX** with clean, consistent interface

## Installation

### Prerequisites

- Go 1.21 or higher

### Build from source

```bash
git clone https://github.com/hungnguyen/uzp.git
cd uzp
go build -o uzp
```

### Install globally

```bash
go install .
```

## Quick Start

### 1. Initialize vault

```bash
uzp init
```

Creates a new encrypted vault with your master password.

### 2. Add secrets

```bash
uzp add
```

Follow the prompts to add project/key/value. Example:
- Project: `myapp`
- Key: `api_key` 
- Value: `sk-1234567890abcdef`

### 3. Use secrets

```bash
# Get a specific secret
uzp get myapp/api_key

# Copy to clipboard
uzp copy myapp/api_key

# Export as .env file
uzp inject -p myapp > .env
```

## Commands

### Core Commands

| Command | Description | Example |
|---------|-------------|---------|
| `uzp init` | Initialize new vault | `uzp init` |
| `uzp add` | Add a secret | `uzp add` |
| `uzp get <project/key>` | Get secret value | `uzp get myapp/api_key` |
| `uzp list` | List all secrets | `uzp list` |
| `uzp inject -p <project>` | Export to .env format | `uzp inject -p myapp > .env` |

### Additional Commands

| Command | Description | Example |
|---------|-------------|---------|
| `uzp update <project/key>` | Update existing secret | `uzp update myapp/api_key` |
| `uzp copy <project/key>` | Copy to clipboard | `uzp copy myapp/api_key` |
| `uzp search <keyword>` | Search secrets | `uzp search api` |
| `uzp reset` | Delete all data | `uzp reset` |

### Environment File Export

```bash
# Export to .env file
uzp inject -p myapp > .env

# Export to custom file  
uzp inject -p backend > backend.env

# Preview in terminal
uzp inject -p myapp
```

**Output format:**
```bash
# Environment variables for project: myapp
# Generated by uzp

API_KEY=your_secret_value
DATABASE_URL=postgresql://user:pass@host:5432/db
CLIENT_SECRET=oauth_client_secret
```

## Auto-Unlock

UZP automatically prompts for your master password when needed - no manual unlock required. Simply run any command and enter your password if prompted.

```bash
# No need to unlock first - just use directly
uzp get myapp/api_key
# Enter master password: [prompted automatically]
```

## Security

- **Encryption**: AES-256-GCM for data encryption
- **Key Derivation**: scrypt with secure parameters (N=32768, r=8, p=1)
- **Password Protection**: Master password never stored, only its hash
- **Clipboard Safety**: Automatic clearing after TTL
- **File Permissions**: Vault file created with 0600 permissions

## Storage Location

The vault is stored at:
- macOS/Linux: `~/.uzp/uzp.vault`
- Windows: `%USERPROFILE%\.uzp\uzp.vault`

## Examples

### Typical Workflow

```bash
# 1. Initialize vault (one time)
uzp init

# 2. Add secrets for different projects
uzp add  # myapp/api_key
uzp add  # myapp/database_url
uzp add  # aws/access_key_id
uzp add  # aws/secret_access_key

# 3. Use secrets in your projects
uzp inject -p myapp > .env
uzp inject -p aws > aws.env

# 4. Get individual secrets when needed
uzp get myapp/api_key
uzp copy aws/access_key_id
```

### Development Workflow

```bash
# View all secrets
uzp list

# Search for specific secrets
uzp search database
uzp search aws

# Update existing secrets
uzp update myapp/api_key

# Generate environment files for different environments
uzp inject -p myapp > .env.local
uzp inject -p myapp-prod > .env.production
```

## Development

### Project Structure

```
uzp/
â”œâ”€â”€ cmd/               # CLI commands
â”‚   â”œâ”€â”€ root.go        # Main command and help
â”‚   â”œâ”€â”€ init.go        # Initialize vault
â”‚   â”œâ”€â”€ add.go         # Add secrets
â”‚   â”œâ”€â”€ get.go         # Get secrets
â”‚   â”œâ”€â”€ update.go      # Update secrets
â”‚   â”œâ”€â”€ list.go        # List secrets
â”‚   â”œâ”€â”€ search.go      # Search secrets
â”‚   â”œâ”€â”€ copy.go        # Copy to clipboard
â”‚   â”œâ”€â”€ inject.go      # Export .env files
â”‚   â””â”€â”€ reset.go       # Reset vault
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ crypto/        # AES-256-GCM encryption
â”‚   â”œâ”€â”€ storage/       # Vault management
â”‚   â””â”€â”€ utils/         # Clipboard utilities
â”œâ”€â”€ main.go
â””â”€â”€ go.mod
```

### Building

```bash
go build -o uzp
```

## Key Features

### Professional UX
- **Clean interface**: No emojis or excessive formatting
- **Consistent commands**: All commands follow the same pattern
- **Helpful error messages**: Clear guidance when something goes wrong
- **Auto-unlock**: No session management - just run commands when needed

### Security Best Practices
- **AES-256-GCM encryption**: Industry-standard encryption
- **scrypt key derivation**: Secure password-based key derivation
- **No password storage**: Only password hash stored for verification
- **Secure file permissions**: Vault file created with 0600 permissions
- **Memory safety**: Passwords cleared from memory after use

### Developer-Friendly
- **Environment file generation**: Perfect for development workflows
- **Project-based organization**: Group secrets by application/service
- **Search functionality**: Quickly find secrets across projects
- **Clipboard integration**: Secure copy with automatic clearing

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

MIT License

## Security Notice

- âš ï¸ **Never share your master password**
- ğŸ”’ **Keep your vault file (`~/.uzp/uzp.vault`) secure**
- ğŸ’¾ **Regularly backup your vault file**
- ğŸ”‘ **Use a strong, unique master password (8+ characters)**
- ğŸš« **Don't store your master password in scripts or files**

## Support

For issues, questions, or feature requests, please create an issue on GitHub. 